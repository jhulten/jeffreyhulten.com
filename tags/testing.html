---
layout: tag
tag: testing
title: Posts in testing
---
        <li><a href="/2009/09/08/testing-puppet-parser-functions.html">Testing Puppet Parser Functions</a>
           &raquo; <abbr>08 Sep 2009</abbr>
        <li><a href="/2009/09/22/nfjs-fall-2009-day-one.html">NFJS - Fall 2009 - Day One</a>
           &raquo; <abbr>22 Sep 2009</abbr>
    <item> 
  		<title>Testing Puppet Parser Functions</title> 
  		<link>http://tragicallyleet.com/2009/09/08/testing-puppet-parser-functions.html</link> 
  		<comments>http://tragicallyleet.com/2009/09/08/testing-puppet-parser-functions.html#comments</comments> 
  		<pubDate>Tue, 08 Sep 2009 00:00:00 -0800</pubDate> 
  		<dc:creator>Jeffrey Hulten</dc:creator> 
  		<guid isPermaLink="true">http://tragicallyleet.com</guid> 
  		<description>/2009/09/08/testing-puppet-parser-functions.html</description> 
  		<content:encoded><![CDATA[ I have been working on some parser functions for Puppet. Specifically I was using the example from the [wiki](http://reductivelabs.com/trac/puppet/wiki/WritingYourOwnFunctions):

{% highlight ruby %}
require 'ipaddr'
module Puppet::Parser::Functions
	newfunction(:minute_from_address, :type => :rvalue) do |args|
		IPAddr.new(lookupvar('ipaddress')).to_i % 60
	end
end
{% endhighlight %}

I wanted to test this function so I started up irb, including the puppet library and my function file...

{% highlight bash %}
% irb -r puppet -r time_from_facts.rb
>>
{% endhighlight %}

To make sure that the function was loaded I used the 'function' call in the Puppet::Parser::Functions.

{% highlight irb %}
>> Puppet::Parser::Functions::function(:minute_from_address)
=> "function_minute_from_address"
{% endhighlight %}

This shows that the function was loaded. We can then test the function by instanciating a parser scope object:

{% highlight irb %}
>> s = Puppet::Parser::Scope.new
=> #<Puppet::Parser::Scope:0x12fb984 @defaults={}, @symtable={}, @namespaces=[""], @tags=[]>
{% endhighlight %}

Once the scope is created I can set variables that may be used in the function, specifically 'ipaddress' in this example:

{% highlight irb %}
>> s.setvar('ipaddress','192.168.205.12')
=> "192.168.205.12"
{% endhighlight %}

With the variable set all that is left is to call the function and see what happens:

{% highlight irb %}
>> s.function_minute_from_address
=> 52
{% endhighlight %}

Hope this helps some of you with testing your Puppet functions.
 ]]></content:encoded> 
  		</item>
    <item> 
  		<title>NFJS - Fall 2009 - Day One</title> 
  		<link>http://tragicallyleet.com/2009/09/22/nfjs-fall-2009-day-one.html</link> 
  		<comments>http://tragicallyleet.com/2009/09/22/nfjs-fall-2009-day-one.html#comments</comments> 
  		<pubDate>Tue, 22 Sep 2009 00:00:00 -0800</pubDate> 
  		<dc:creator>Jeffrey Hulten</dc:creator> 
  		<guid isPermaLink="true">http://tragicallyleet.com</guid> 
  		<description>/2009/09/22/nfjs-fall-2009-day-one.html</description> 
  		<content:encoded><![CDATA[ Its that time again! The No Fluff Just Stuff : Pacific Northwest Software Symposium has returned to the Redmond Marriot.

### Effective Java - Venkat Subramaniam

Unlike many talks, Venkat let us chose the topics. He put up a Jeopardy style board with categories like 'Syntax Sugar', 'Collections' and 'Objects' and let us pick. The content varied wildly, not in its quality (Venkat knows his stuff) but in just how deep into the rabbit hole it would lead you.

As an example, which is better?

{% highlight java %}
string1 + string2
new StringBuffer(string1).append(string2)
{% endhighlight %}

Normally you might think that the simple + would be less efficient, but thanks to syntactic sugar the opposite is true.

In Java 1.4 and above the simple + will use StringBuilder in the background. StringBuilder will preallocate space based on expectations and will not acquire and release locks like StringBuffer will.

There were a lot of code examples and we covered pitfalls and Java strangeness like the above.

### Common Antipatterns - Mark Richards

We started talking about common antipatterns in life as an example.

There are some common causes of anti-patterns:

- haste - aggressive deadlines and budgets drive lower standards of quality
- apathy - general lack of concern about finding the proper solution to a problem
- arrogance - refusal to accept solutions or practices generally known to be effective
- ignorance - failure (intentional or non-intentional) to seek a clear understanding of the problem space
- pride - refusal to leverage existing designs, code and frameworks; builds everything from scratch

**Object Orgy** - insufficiently encapsulated objects result in unrestricted access to their internals.

**Cargo Cult Programming** - using patters, methods and techniques without understanding why.

**Golden Hammer** - using the same tool, product or technique to solve every problem.

With the plethora of languages available on the JVM, we have all kinds of choice. For a comprehensive list of language options, see [http://www.is-research.de/info/vmlanguages/](http://www.is-research.de/info/vmlanguages/)

**Accidental Complexity** - introducing non-essential complexity into a solution.

> essential complexity: we have a hard problem
> 
> accidental complexity: we have made a problem hard
> 
> "developers are drawn to complexity like moths to a flame - often with the same result" - Neal Ford

**Lava Flow** - obsolete technologies and forgotten extensions leave hardened globules of dead code in its wake.

**The Blob** - an all encompassing class or component that knows too much and does too much.

Use a roles and responsibility model. Figure out in just a couple of sentences what the job of a given object is.

**Architecture by Implication** - systems lacking a clear architecture definition.

Don't rely too heavily on past experience; every problem is a little different.

### Groovy Testing - Scott Davis

There are some real benefits to using Groovy for testing. Groovy has the ability to get into the private guts of a Java object.

The concept of a 'private' field is a Java *language* construct, not a Java *platform* construct. This means you can get to private methods and fields.

### Keynote - Venkat Subramaniam

Venkat gave the keynote after dinner; an entertaining talk about the pointy-hairness in all of us, not just bosses.

 ]]></content:encoded> 
  		</item>
